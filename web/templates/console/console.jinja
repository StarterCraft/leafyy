<!DOCTYPE html>
<html>
    <head>
        <title>
            –õ–∏—Å—Ç–æ—á–µ–∫: –∂—É—Ä–Ω–∞–ª –∏ –∫–æ–Ω—Å–æ–ª—å
        </title>
        <link rel="apple-touch-icon" sizes="180x180" href="/resources/apple-touch-icon.png">
        <link rel="icon" type="image/svg+xml" href="/resources/favicon.svg">
        <link rel="icon" type="image/png" href="/resources/favicon.png">
        <link rel="manifest" href="/site.webmanifest">
        <link rel="mask-icon" href="/resources/safari-pinned-tab.svg" color="#5bbad5">
        <meta charset="utf-8">
        <meta name="msapplication-TileColor" content="#fff3b4">
        <meta name="theme-color" content="#fff3b4">
        <link rel="stylesheet" type="text/css" href="/leafyy.css">
    </head>
    <body>
        <header class="block stretcher">
            <img src="/resources/banner.jpg" height="32">
            <nav class="actionblock">
                <a class="action" href="/">–¥–æ–º–æ–π</a>
                <a class="action" href="/rules">–ø—Ä–∞–≤–∏–ª–∞</a>
                <a class="action" href="/devices">—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞</a>
                <a class="action" href="/log">–∫–æ–Ω—Å–æ–ª—å</a>
                <a class="action" href="/doc">—Å–ø—Ä–∞–≤–∫–∞</a>
                <a class="action" href="/account" id="account">üë§ {{user.username}}</a>
            </nav>
        </header class="block stretcher">
        <div class="block stretcher">
            <div class="bold grand">
                –ñ—É—Ä–Ω–∞–ª –∏ –∫–æ–Ω—Å–æ–ª—å
            </div>
            <nav class="actionblock">
                <a class="action" href="#" onclick="onOpenSettings()">–Ω–∞—Å—Ç—Ä–æ–π–∫–∏</a>
                <a class="action" href="#" onclick="onManualUpdateConsoleData()">–æ–±–Ω–æ–≤–∏—Ç—å</a>
                <a class="action" href="#" onclick="onFlushConsole()">–æ—á–∏—Å—Ç–∏—Ç—å</a>
                <a class="action" href="/log/view">–∫ –∂—É—Ä–Ω–∞–ª—É</a>
            </nav>
        </div>
        <!--#region modals-->
        <div class="modal-field vertical">
            <!--#region log-settings-->
            <div class="modal vertical" id="log-settings">
                <div class="block stretcher">
                    <div class="bold grand">
                        –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–Ω—Å–æ–ª–∏
                    </div>
                    <nav class="actionblock">
                        <a class="action" href="#" onclick="onSaveSettings()">–ø—Ä–∏–º–µ–Ω–∏—Ç—å</a> <!-- –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ! -->
                        <a class="action" href="#" onclick="toggleModal('log-settings')">–æ—Ç–º–µ–Ω–∞</a>
                    </nav>
                </div>
                <div class="block vertical restricted">
                    <div class="stretcher">
                        <span class="bold grand">–£—Ä–æ–≤–µ–Ω—å –∂—É—Ä–Ω–∞–ª–∞</span>
                        <select class="formi code grand log-level" id="global" onchange="onLogLevelSelectChange('global')">
                            <option value="DEBUG" style="color: gray;">DEBUG</option>
                            <option value="INFO" style="color: blue;">INFO</option>
                            <option value="WARNING" style="color: orange;">WARNING</option>
                            <option value="ERROR" style="color: red;">ERROR</option>
                            <option value="EXCEPTION" style="color: darkred;">EXCEPTION</option>
                        </select>
                    </div>
                    <div class="stretcher" onclick="toggleCheckbox('consoleAutoScroll');">
                        <div class="bold grand">–ê–≤—Ç–æ–ø—Ä–æ–∫—Ä—É—Ç–∫–∞</div>
                        <input id="consoleAutoScroll" type="checkbox">
                    </div>
                </div>
                <div class="block vertical">
                    <div class="stretcher" onclick="toggleCheckbox('consoleShouldUpdate');">
                        <div class="bold grand">–ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Å–æ–ª–∏</div>
                        <input id="consoleShouldUpdate" type="checkbox">
                    </div>
                    <div class="stretcher">
                        <span>–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —á–∞—Å—Ç–æ—Ç–∞:</span>
                        <div>
                            <input class="formi" id="minConsoleUpdatePeriod" type="number" min="1" max="3600">
                            <label for="minConsoleUpdatePeriod">—Å–µ–∫—É–Ω–¥</label>
                        </div>
                    </div>
                    <div class="stretcher">
                        <span>–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —á–∞—Å—Ç–æ—Ç–∞:</span>
                        <div>
                            <input class="formi" id="maxConsoleUpdatePeriod" type="number" min="1" max="3600">
                            <label for="maxConsoleUpdatePeriod">—Å–µ–∫—É–Ω–¥</label>
                        </div>
                    </div>
                </div>
                <div class="block vertical">
                    <div class="bold grand">
                        –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∂—É—Ä–Ω–∞–ª–∞
                    </div>
                    <div class="line-view evenly row-gap column-gap">
                        <span class="bold">
                            –ö–∞–Ω–∞–ª—ã –∂—É—Ä–Ω–∞–ª–∏—Ä–æ–≤–∞–Ω–∏—è:
                        </span>
                        <span class="bold">
                            –°–æ–æ–±—â–µ–Ω–∏—è —Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤:
                        </span>
                        <div class="view vertical" id="loggersBlacklist">
                            {% if logConfig.loggers %}
                            {% for logger in logConfig.loggers %}
                            <div class="stretcher">
                                <div>
                                    <input type="checkbox" id="{{logger.name}}" checked="{{logger.live}}">
                                    <label for="{{logger.name}}">{{logger.name}}</label>
                                </div>
                                <div>
                                <span>–£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–≥–µ—Ä–∞:</span>
                                <select class="formi code log-level" id="{{logger.name}}"
                                    selected="{{logger.level}}" onchange="onLogLevelSelectChange('{{logger.name}}')">
                                    <option value="DEBUG" style="color: gray;">DEBUG</option>
                                    <option value="INFO" style="color: blue;">INFO</option>
                                    <option value="WARNING" style="color: orange;">WARNING</option>
                                    <option value="ERROR" style="color: red;">ERROR</option>
                                    <option value="EXCEPTION" style="color: darkred;">EXCEPTION</option>
                                </select>
                                </div>
                            </div>
                            {% endfor %}
                            {% else %}
                            <div></div>
                            <span>–ù–µ—Ç –∫–∞–Ω–∞–ª–æ–≤.</span>
                            {% endif %}
                        </div>
                        <div class="view vertical" id="devicesBlacklist">
                            {% if devices.devices %}
                            {% for device in devices.devices %}
                            <div class="stretcher">
                                <div>
                                    <input type="checkbox" id="{{device.address}}" checked="{{device.visibleInConsole}}">
                                    <label for="{{device.address}}">{{device.displayName}}
                                <span class="bold code"> @{{device.address}} </span></label>
                                </div>
                                <div>
                                <span>–†–µ–∂–∏–º –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è:</span>
                                <select class="formi code decode-mode" id="{{device.address}}" selected="{{device.decodeMode}}">
                                    <option value="ascii">ASCII</option>
                                    <option value="bin">BIN</option>
                                    <option value="oct">OCT</option>
                                    <option value="dec">DEC</option>
                                    <option value="hex">HEX</option>
                                </select>
                                </div>
                            </div>
                            {% endfor %}
                            {% else %}
                            <div></div>
                            <span>–ù–µ—Ç —É—Å—Ç—Ä–æ–π—Å—Ç–≤.</span>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
        </div>
        <!-- #endregion -->
        </div>
        <!-- #endregion -->
        <!-- #region primary -->
        <div class="block maxheight">
            <div class="code line-view vertical" id="view">
                {% for line in console %}
                <div class="log-lineno">
                    {{loop.index}}
                </div>
                <div class="log-message">
                    {{line|safe}}
                </div>
                {% endfor %}
            </div>
        </div>
        <div class="block stretcher status-bar" style="display: none;">
            <div id="status"></div>
            <div>
                <a class="action" href="#" onclick="hideStatusBar()">—Å–∫—Ä—ã—Ç—å</a>
            </div>
        </div>
        <div class="block">
            <div id="console" style="display: contents;">
                <select class="code formi" id="target" onchange="onConsoleTargetSelected()">
                    <option value="server">–°–µ—Ä–≤–µ—Ä</option>
                    {% for device in devices.devices %}
                    {% if device.status == 1 %}
                    <option value="{{device.address}}">{{device.address}}</option>
                    {% endif %}
                    {% endfor %}
                </select>
                <input class="code formi maxwidth" type="text" id="data" onkeydown="onConsoleInputKeyDown(event)">
                <select class="code formi" id="type" onchange="onConsoleInputTypeSelected()">
                    <option value="ascii">ASCII</option>
                    <option value="bin">BIN</option>
                    <option value="oct">OCT</option>
                    <option value="dec">DEC</option>
                    <option value="hex">HEX</option>
                </select>
                <button class="code formi" id="consoleSend" onclick="onConsoleSend()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
            </div>
        </div>
        <!-- #endregion -->
        <script src="/libraries/jquery.js"></script>
        <script src="/libraries/js-cookie.js"></script>
        <script src="/leafyy.js"></script>
        <script src="/console.js"></script>
    </body>
</html>
